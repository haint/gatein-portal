#{param name=allConsumers/}

<div class="OAuthConsumer">
	<div><h1>
	Shindig OAuth Store: Manage mappings of gadget and OAuth key</h1></div>
	<div>
	<% if(allConsumers != null) { %>
		<table border="1">
			<tr bgcolor="#99CCFF">
				<td valign="top"><b>Gadget Uri</b></td>
				<td valign="top"><b>Key Name</b></td>
				<td valign="top"><b>Consumer Key</b></td>
				<td valign="top"><b>Consumer Secret</b></td>
				<td valign="top"><b>Key Type</b></td>
				<td valign="top"><b>Action</b></td>
			</tr>
			 <% for (def consumer : allConsumers) { %>
				<tr>
					<td>
					<% for (def uri : consumer.gadgetUris) {%>
						  <div>${uri}\n</div>
					<% } %>
					
					</td>
					<td><a href="@{OAuthStore.showConsumerDetail(keyName =  consumer.keyName)}">${consumer.keyName}</a></td>
					<td>${consumer.consumerKey}</td>
					<td>${consumer.consumerSecret}</td>
					<td>${consumer.keyType}</td>
					<td>
					    <p>
					    	<a href="@{OAuthStore.deleteConsumer(keyName = consumer.keyName)}" title="Delete this consumer">Delete</a>
    					</p>
					</td>
				</tr>
			<% } %>
		</table>
	<% } %>
	<br />
	    <p>
    		<a class="OSummit" href="@{OAuthStore.showAddNewConsumer()}">Add Consumer</a>
    		<a class="OSummit" href="@{OAuthStore.showAddMapping()}">Add Mapping</a>
		</p>
	</div>
</div>